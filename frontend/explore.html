<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Vekron | Explore Opportunities</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body { background: #f8f9fa; margin: 0; padding: 0; }
    .header {
      background: white;
      padding: 20px 40px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logo { font-size: 24px; font-weight: bold; color: #10b981; }
    .welcome {
      margin: 40px 40px 20px;
      font-size: 32px;
      font-weight: bold;
    }
    .subtitle { color: #666; margin-bottom: 30px; }
    .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 0 40px 40px; }
    .stat-card { background: white; padding: 20px; border-radius: 16px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
    .stat-number { font-size: 36px; font-weight: bold; color: #10b981; }
    .stat-label { color: #666; font-size: 14px; }
    .section-title {
      margin: 0 40px 20px;
      font-size: 24px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .jobs-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
      gap: 20px;
      margin: 0 40px 40px;
    }
    
    .job-card {
      background: white;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.05);
      transition: transform 0.2s;
    }
    .job-card:hover { transform: translateY(-5px); }
    .match-badge {
      background: #ecfdf5;
      color: #10b981;
      padding: 8px 12px;
      border-radius: 20px;
      font-size: 14px;
      display: inline-block;
      margin-bottom: 10px;
    }
    .job-title { font-size: 20px; font-weight: bold; margin: 10px 0; }
    .company { color: #666; }
    .meta { display: flex; gap: 15px; margin: 15px 0; color: #666; font-size: 14px; }
    .tags { display: flex; flex-wrap: wrap; gap: 8px; margin: 15px 0; }
    .tag {
      background: #f0fdf4;
      color: #10b981;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 13px;
    }
    .posted { color: #999; font-size: 14px; }
    .nav-links {
  display: flex;
  align-items: center;
  gap: 30px;
}

.nav-links a {
  text-decoration: none;
  color: #666;
  font-weight: 500;
  font-size: 16px;
  padding: 8px 16px;
  border-radius: 30px;
  transition: all 0.2s;
}

.nav-links a:hover {
  background: #f0fdf4;
  color: #10b981;
  
}
  </style>
</head>
<body>
  

 
 
<div class="nav-links">
    <a href="index.html">Home</a>
    <a href="explore.html">Explore</a>
    
  </div>
  <div class="container">
    <h1 class="welcome">Explore All Opportunities</h1>
    <p class="subtitle">Browse all available jobs and internships</p>

    <div class="stats" id="stats"></div>

    <h2 class="section-title">All Opportunities</h2>

    <div class="jobs-grid" id="all-opportunities"></div>
  </div>
  

  <!-- Logout Modal (same as dashboard) -->
  <div id="logout-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); align-items: center; justify-content: center; z-index: 1000;">
    <div style="background: white; padding: 40px; border-radius: 16px; text-align: center; width: 350px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
      <h3 style="margin-bottom: 30px;">Are you sure you want to log out?</h3>
      <div>
        <button onclick="confirmLogout()" style="padding: 12px 30px; background: #ef4444; color: white; border: none; border-radius: 30px; margin: 0 15px; cursor: pointer; font-weight: bold;">Yes</button>
        <button onclick="closeLogoutModal()" style="padding: 12px 30px; background: #e5e7eb; color: #333; border: none; border-radius: 30px; margin: 0 15px; cursor: pointer; font-weight: bold;">No</button>
      </div>
    </div>
  </div>

  <script src="js/api.js"></script>
  <script src="script.js"></script>

  <script>
    async function loadAllOpportunities() {
      try {
        // Fetch all jobs (you'll need this endpoint)
        const data = await fetch("/opportunities/all").then(res => res.json());

        const container = document.getElementById("all-opportunities");
        container.innerHTML = "";

        const jobs = data.opportunities || data || [];

        if (jobs.length === 0) {
          container.innerHTML = "<p>No opportunities available at the moment.</p>";
          return;
        }

        // Update stats
        document.getElementById("stats").innerHTML = `
          <div class="stat-card">
            <div class="stat-number">${jobs.length}</div>
            <div class="stat-label">Total Opportunities</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">${Math.floor(jobs.length / 3)}</div>
            <div class="stat-label">Internships</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">${Math.floor(jobs.length / 2)}</div>
            <div class="stat-label">Full-time</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">100%</div>
            <div class="stat-label">Fresh Listings</div>
          </div>
        `;

        jobs.forEach(job => {
          const card = document.createElement("div");
          card.className = "job-card";
          card.innerHTML = `
            <div class="job-title">${job.title}</div>
            <div class="company">${job.company_name}</div>
            <div class="meta">
              <span>üìç ${job.location || 'Remote'}</span>
              <span>üéì ${job.experience_level || 'Any'}</span>
            </div>
            <div class="tags">
              ${job.skills_required ? job.skills_required.split(',').slice(0,6).map(s => `<span class="tag">${s.trim()}</span>`).join('') : ''}
              ${job.skills_required && job.skills_required.split(',').length > 6 ? '<span class="tag">+ more</span>' : ''}
            </div>
            <div class="posted">Posted recently</div>
          `;
          container.appendChild(card);
        });

      } catch (err) {
        console.error(err);
        document.getElementById("all-opportunities").innerHTML = "<p>Failed to load opportunities.</p>";
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      loadAllOpportunities();
      updateHeader();  // for logout button
    });
  </script>
</body>
</html>